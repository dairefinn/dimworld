[gd_scene load_steps=41 format=3 uid="uid://b87ej4bbh38c3"]

[ext_resource type="Script" uid="uid://cjipulvc3f0ef" path="res://Core/Agents/Instances/Trader/Trader.cs" id="1_wymmq"]
[ext_resource type="Script" uid="uid://cxbp1npv1tukk" path="res://Core/Agents/DetectionHandler.cs" id="2_15ljn"]
[ext_resource type="Script" uid="uid://cqsim0vts1sc1" path="res://Core/Goap/GoapState.cs" id="2_njvor"]
[ext_resource type="Script" uid="uid://bm0o5ggnfmm6y" path="res://Core/Items/Inventory/InventorySlot.cs" id="2_r5mgb"]
[ext_resource type="Script" uid="uid://dph74un0q20el" path="res://Core/Items/Inventory/Inventory.cs" id="3_njvor"]
[ext_resource type="Script" uid="uid://cru4kq28c8nuw" path="res://Core/Agents/AgentStats.cs" id="4_fhppm"]
[ext_resource type="Texture2D" uid="uid://dpxdm8niupad2" path="res://Resources/Sprites/Character.png" id="6_eiu0g"]
[ext_resource type="Script" uid="uid://ckdaa4jpv4ysf" path="res://Core/Agents/Visuals/ClothingController.cs" id="7_j72rl"]
[ext_resource type="Texture2D" uid="uid://bm5yi454iqlnw" path="res://Core/Agents/Visuals/CharacterSpriteSheet.tres" id="8_y41ga"]
[ext_resource type="PackedScene" uid="uid://bb462hku8uk8i" path="res://Core/Agents/UI/AgentStatsUI.tscn" id="9_3tf08"]
[ext_resource type="PackedScene" uid="uid://v23vcyiu8qgc" path="res://Core/Agents/Dialogue/Scenes/SpeechBubble/SpeechBubble.tscn" id="10_ne26j"]

[sub_resource type="Resource" id="Resource_0bk61"]
script = ExtResource("2_njvor")
State = Dictionary[String, Variant]({})

[sub_resource type="Resource" id="Resource_c201q"]
script = ExtResource("2_r5mgb")
Quantity = 0
metadata/_custom_type_script = "uid://bm0o5ggnfmm6y"

[sub_resource type="Resource" id="Resource_w5v3e"]
script = ExtResource("2_r5mgb")
Quantity = 0
metadata/_custom_type_script = "uid://bm0o5ggnfmm6y"

[sub_resource type="Resource" id="Resource_3yclk"]
script = ExtResource("2_r5mgb")
Quantity = 0
metadata/_custom_type_script = "uid://bm0o5ggnfmm6y"

[sub_resource type="Resource" id="Resource_2vavr"]
script = ExtResource("2_r5mgb")
Quantity = 0
metadata/_custom_type_script = "uid://bm0o5ggnfmm6y"

[sub_resource type="Resource" id="Resource_h8c30"]
script = ExtResource("2_r5mgb")
Quantity = 0
metadata/_custom_type_script = "uid://bm0o5ggnfmm6y"

[sub_resource type="Resource" id="Resource_jbsy0"]
script = ExtResource("2_r5mgb")
Quantity = 0
metadata/_custom_type_script = "uid://bm0o5ggnfmm6y"

[sub_resource type="Resource" id="Resource_l8oum"]
script = ExtResource("2_r5mgb")
Quantity = 0
metadata/_custom_type_script = "uid://bm0o5ggnfmm6y"

[sub_resource type="Resource" id="Resource_yiv0j"]
script = ExtResource("2_r5mgb")
Quantity = 0
metadata/_custom_type_script = "uid://bm0o5ggnfmm6y"

[sub_resource type="Resource" id="Resource_gnywb"]
script = ExtResource("2_r5mgb")
Quantity = 0
metadata/_custom_type_script = "uid://bm0o5ggnfmm6y"

[sub_resource type="Resource" id="Resource_i3wml"]
script = ExtResource("2_r5mgb")
Quantity = 0
metadata/_custom_type_script = "uid://bm0o5ggnfmm6y"

[sub_resource type="Resource" id="Resource_oj62l"]
script = ExtResource("2_r5mgb")
Quantity = 0
metadata/_custom_type_script = "uid://bm0o5ggnfmm6y"

[sub_resource type="Resource" id="Resource_j6h07"]
script = ExtResource("2_r5mgb")
Quantity = 0
metadata/_custom_type_script = "uid://bm0o5ggnfmm6y"

[sub_resource type="Resource" id="Resource_7rdtx"]
script = ExtResource("2_r5mgb")
Quantity = 0
metadata/_custom_type_script = "uid://bm0o5ggnfmm6y"

[sub_resource type="Resource" id="Resource_bdjle"]
script = ExtResource("2_r5mgb")
Quantity = 0
metadata/_custom_type_script = "uid://bm0o5ggnfmm6y"

[sub_resource type="Resource" id="Resource_0s5bi"]
script = ExtResource("2_r5mgb")
Quantity = 0
metadata/_custom_type_script = "uid://bm0o5ggnfmm6y"

[sub_resource type="Resource" id="Resource_yms12"]
script = ExtResource("3_njvor")
InventoryName = "Trader Inventory"
Slots = Array[ExtResource("2_r5mgb")]([SubResource("Resource_c201q"), SubResource("Resource_w5v3e"), SubResource("Resource_3yclk"), SubResource("Resource_2vavr"), SubResource("Resource_h8c30"), SubResource("Resource_jbsy0"), SubResource("Resource_l8oum"), SubResource("Resource_yiv0j"), SubResource("Resource_gnywb"), SubResource("Resource_i3wml"), SubResource("Resource_oj62l"), SubResource("Resource_j6h07"), SubResource("Resource_7rdtx"), SubResource("Resource_bdjle"), SubResource("Resource_0s5bi")])
metadata/_custom_type_script = "uid://dph74un0q20el"

[sub_resource type="Resource" id="Resource_fii88"]
script = ExtResource("4_fhppm")
MaxHealth = 100.0
MaxStamina = 100.0
metadata/_custom_type_script = "uid://cru4kq28c8nuw"

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_70kxo"]

[sub_resource type="CircleShape2D" id="CircleShape2D_aqd4d"]
radius = 100.0

[sub_resource type="AtlasTexture" id="AtlasTexture_jnsho"]
atlas = ExtResource("6_eiu0g")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_fhppm"]
atlas = ExtResource("6_eiu0g")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_mt8sj"]
atlas = ExtResource("6_eiu0g")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_psefn"]
atlas = ExtResource("6_eiu0g")
region = Rect2(96, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_hu1mw"]
atlas = ExtResource("6_eiu0g")
region = Rect2(32, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_m0775"]
atlas = ExtResource("8_y41ga")
region = Rect2(32, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ccr4l"]
atlas = ExtResource("6_eiu0g")
region = Rect2(32, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_eiu0g"]
atlas = ExtResource("6_eiu0g")
region = Rect2(64, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_j72rl"]
atlas = ExtResource("6_eiu0g")
region = Rect2(96, 96, 32, 32)

[node name="Trader" type="CharacterBody2D" node_paths=PackedStringArray("NavigationAgent", "StatsUI", "SpeechBubble", "ClothingController", "DetectionHandler")]
script = ExtResource("1_wymmq")
WorldState = SubResource("Resource_0bk61")
NavigationAgent = NodePath("NavigationAgent2D")
Inventory = SubResource("Resource_yms12")
Stats = SubResource("Resource_fii88")
StatsUI = NodePath("AgentStatsUI")
SpeechBubble = NodePath("CenterContainer/SpeechBubble")
ClothingController = NodePath("BodySprite")
DetectionHandler = NodePath("DetectionHandler")

[node name="Hitbox" type="CollisionShape2D" parent="."]
shape = SubResource("CapsuleShape2D_70kxo")

[node name="DetectionHandler" type="Area2D" parent="." node_paths=PackedStringArray("DetectedEntities")]
collision_layer = 0
collision_mask = 3
script = ExtResource("2_15ljn")
DetectedEntities = []

[node name="CollisionShape2D" type="CollisionShape2D" parent="DetectionHandler"]
shape = SubResource("CircleShape2D_aqd4d")
debug_color = Color(0, 0.608985, 0.644943, 0.42)

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="."]
path_desired_distance = 5.0
target_desired_distance = 5.0
path_postprocessing = 1
radius = 1.0
debug_use_custom = true
debug_path_custom_color = Color(0.870387, 1.44392e-06, 1.2514e-06, 1)

[node name="BodySprite" type="Sprite2D" parent="." node_paths=PackedStringArray("HairSprite", "EyesSprite", "TopSprite", "OvertopSprite", "BottomsSprite", "ShoesSprite")]
texture = SubResource("AtlasTexture_jnsho")
script = ExtResource("7_j72rl")
HairSprite = NodePath("Mask")
EyesSprite = NodePath("Eyes")
TopSprite = NodePath("Top")
OvertopSprite = NodePath("Overtop")
BottomsSprite = NodePath("Bottom")
ShoesSprite = NodePath("Shoes")

[node name="Shoes" type="Sprite2D" parent="BodySprite"]
texture = SubResource("AtlasTexture_fhppm")

[node name="Bottom" type="Sprite2D" parent="BodySprite"]
texture = SubResource("AtlasTexture_mt8sj")

[node name="Top" type="Sprite2D" parent="BodySprite"]
texture = SubResource("AtlasTexture_psefn")

[node name="Overtop" type="Sprite2D" parent="BodySprite"]
texture = SubResource("AtlasTexture_hu1mw")

[node name="Eyes" type="Sprite2D" parent="BodySprite"]
unique_name_in_owner = true
texture = SubResource("AtlasTexture_m0775")

[node name="Mask" type="Sprite2D" parent="BodySprite"]
texture = SubResource("AtlasTexture_ccr4l")

[node name="Goggles" type="Sprite2D" parent="BodySprite"]
texture = SubResource("AtlasTexture_eiu0g")

[node name="Hood" type="Sprite2D" parent="BodySprite"]
texture = SubResource("AtlasTexture_j72rl")

[node name="AgentStatsUI" parent="." instance=ExtResource("9_3tf08")]
offset_left = -11.0
offset_top = 16.0
offset_right = 11.0
offset_bottom = 21.0

[node name="CenterContainer" type="CenterContainer" parent="."]
offset_top = -30.0
offset_bottom = -30.0
use_top_left = true

[node name="SpeechBubble" parent="CenterContainer" instance=ExtResource("10_ne26j")]
visible = false
layout_mode = 2
Text = ""
